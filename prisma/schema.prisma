datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id    String         @id @unique @default(uuid())
  email String         @unique
  name  String?
  tasks TasksOnUsers[]
}

model Task {
  id           String         @id @unique @default(uuid())
  summary      String
  subtask      SubTask[]
  started      Boolean
  complete     Boolean
  List         List?          @relation(fields: [listId], references: [id])
  listId       String?
  TasksOnUsers TasksOnUsers[]
}

model SubTask {
  id      String  @id @default(uuid())
  summary String
  Task    Task?   @relation(fields: [taskId], references: [id])
  taskId  String?
}

model List {
  id    String @id @default(uuid())
  title String
  tasks Task[]
}

model TasksOnUsers {
  user      User     @relation(fields: [userId], references: [id])
  userId    String
  tasks     Task     @relation(fields: [taskId], references: [id])
  taskId    String
  createdAt DateTime @default(now())
  owner     String

  @@id([taskId, userId])
}
